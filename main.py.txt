import discord
from discord.ext import commands
import os

intents = discord.Intents.default()
intents.voice_states = True
intents.guilds = True

bot = commands.Bot(command_prefix="!", intents=intents)

TOKEN = os.environ["DISCORD_TOKEN"]  # التوكن من متغير البيئة

@bot.event
async def on_ready():
    print(f"✅ Logged in as {bot.user}")

@bot.command()
async def join(ctx):
    if ctx.author.voice:
        channel = ctx.author.voice.channel
        await channel.connect()
        await ctx.send(f"دخلت الروم: {channel}")
    else:
        await ctx.send("⚠️ لازم تكون في روم صوتي!")

@bot.command()
async def leave(ctx):
    if ctx.voice_client:
        await ctx.voice_client.disconnect()
        await ctx.send("طلعت من الروم ✅")
    else:
        await ctx.send("انا مو داخل أي روم 📭")

bot.run(TOKEN)
