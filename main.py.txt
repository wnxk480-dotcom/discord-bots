import os
import discord
from discord.ext import commands

# ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© =====
TOKEN = os.environ["TOKEN"]               # Ù†Ù‚Ø±Ø£ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Ø¨ÙŠØ¦Ø© Railway
VOICE_CHANNEL_ID = 1404554567370412182    # <-- Ø¹Ø¯Ù‘Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø±ÙˆÙ…Ùƒ Ø§Ù„ØµÙˆØªÙŠ

# ÙØ¹Ù‘Ù„ Message Content Intent Ù„Ø£Ù†Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ø£ÙˆØ§Ù…Ø± Ù†ØµÙŠØ© Ù…Ø«Ù„ !ping
intents = discord.Intents.default()
intents.message_content = True

bot = commands.Bot(command_prefix="!", intents=intents)

@bot.event
async def on_ready():
    print(f"âœ… Logged in as {bot.user}")

    # Ù†Ø­Ø§ÙˆÙ„ Ù†Ø¬Ù„Ø¨ Ø§Ù„Ù‚Ù†Ø§Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ø´ Ø£Ùˆ Ù…Ù† Ø§Ù„Ù€ API
    channel = bot.get_channel(VOICE_CHANNEL_ID)
    if channel is None:
        try:
            channel = await bot.fetch_channel(VOICE_CHANNEL_ID)
        except Exception as e:
            print(f"âŒ Couldn't fetch channel: {e}")
            return

    # Ù†ØªØ£ÙƒØ¯ Ø£Ù†Ù‡Ø§ Ù‚Ù†Ø§Ø© ØµÙˆØªÙŠØ© Ø«Ù… Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„Ø§ØªØµØ§Ù„
    if isinstance(channel, discord.VoiceChannel):
        try:
            if not channel.guild.voice_client:
                await channel.connect()
            else:
                await channel.guild.voice_client.move_to(channel)
            print(f"ðŸ”Š Connected to voice: {channel.name}")
        except Exception as e:
            print(f"âŒ Voice connect failed: {e}")
    else:
        print("âš ï¸ VOICE_CHANNEL_ID Ù„Ø§ ÙŠØ´ÙŠØ± Ù„Ù‚Ù†Ø§Ø© ØµÙˆØªÙŠØ©.")

# Ø£Ù…Ø± Ø¨Ø³ÙŠØ· Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
@bot.command()
async def ping(ctx):
    await ctx.send("pong ðŸ“")

if __name__ == "__main__":
    bot.run(TOKEN)
